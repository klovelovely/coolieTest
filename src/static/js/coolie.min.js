/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.14.5
 * @license MIT
 */
(function(){"use strict";var e=this;if(!e.coolie){var n="image",t="json",r="text",o="js",i="src",u="script",c="coolie modules",a={};a.version="0.14.5";var s,l=function(){return(new Date).getTime()},f=0,d=e.document,p={},v=[],h=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},g=function(e){return"array"===h(e)},m=function(e){return"function"===h(e)},_=function(e){return"string"===h(e)},y=function(e,n,t){var r,o;if(g(e))for(r=t?e.length-1:0,o=t?0:e.length;(t?r>o:o>r)&&n(r,e[r])!==!1;t?r--:r++);else if("object"==typeof e)for(r in e)if(n(r,e[r])===!1)break},b=function(){var n={},t=e.console,r=["log","warn","group","groupEnd"];return y(r,function(e,r){n[r]=function(){if(p.debug!==!1&&t&&t[r])try{t[r].apply(t,arguments)}catch(e){}}}),n}(),x=/\/[^/]+$/,w=/^((ftp|file|https?):)?\/\/[^\/]*/,A=/^\/\//,j=function(e,n){return e=e.replace(w,""),"/"===e?e:x.test(e)?n?e+"/":e.replace(x,"/"):e},S=/^\/|((http|ftp)s?:\/\/)/,E=/^(\.{1,2})\//,$=/(\/[^/]+?)?\/$/,q=function(e,n){if(!n||S.test(n))return n;var t;for(n="./"+n;t=n.match(E);)n=n.replace(E,""),2===t[1].length&&(e=e.replace($,"/"));return e+n},T=function(e,n){return(n||d).getElementsByTagName(e)},k=/[\?#].*?$/,C=/\.js($|\?)/i,L=function(e,n){return e=e.replace(k,""),n?e:($.test(e)&&(e+="index"),e+(C.test(e)?"":"."+o))},D=function(e){return L(e.hasAttribute?e.src:e.getAttribute(i,4))},J=function(e,n){return e.getAttribute("data-"+n)},R=function(e,n){var t=d.createElement(e);return y(n,function(e,n){t[e]=n}),t},U=function(e,n){(n||M||H).appendChild(e)},B=function(e,n){try{e.remove()}catch(t){try{(n||d).removeChild(e)}catch(t){}}},G=/loaded|complete/,H=d.documentElement,M=d.body,N=R("div",{id:c+l()});U(N);var O=/\.[^.]*$/,P=function(e){if(!p._v)return e;var n=_(p._v)?p._v:p._v[e];return n?e.replace(O,"."+n+"$&"):e},F=null,X=0,z=function(n,t){t!==!0&&X++;var r=P(n),o=R(u,{src:r+(p.cache===!1?"?_="+l():""),id:n,async:!0}),i=!1,c=function(e){if(!i){if(i=!0,e&&"error"===e.type)throw"load script error\n"+r;t!==!0&&(F=o,xn(o),X--)}};o.onload!==s?o.onload=o.onerror=c:o.onreadystatechange=function(n){G.test(o.readyState)&&(n=n||e.event,c(n))},U(o,N)},I=function(e,n){var t={};try{t=JSON.parse(n)}catch(r){try{var o=new Function("","return "+n);t=o()}catch(i){throw"parse json error "+e}}return t},K=function(e,n){X++;var r,o=P(e),i=new XMLHttpRequest,u=function(){if(4===i.readyState&&!r){if(r=!0,200!==i.status&&304!==i.status)throw"ajax error\n"+o;wn({_isAn:ln._isAn,id:e,url:o,deps:[],factory:function(){var r=i.responseText;return r&&n===t&&(r=I(e,r)),r}}),X--}};i.onload=i.onreadystatechange=i.onerror=i.onabort=i.ontimeout=u,i.open("GET",o),i.send(null)},Q=function(e){wn({_isAn:ln._isAn,id:e,url:P(e),deps:[],factory:function(){return e}})},V=function(e){var n=T(u,e);return n[n.length-1]},W=V();U(W,N);var Y=function(e){return A.test(e)&&(e=location.protocol+e),(e.match(w)||[])[0]},Z=a.coolieJSURL=D(W),en=Y(Z),nn=J(W,"config"),tn=J(W,"main"),rn=j(Z),on=nn?q(rn,nn):null,un=nn?j(on):null,cn=nn?q(en,on):null,an=function(){if(!nn)return null;var e=Y(cn);return e?e:(e=en,cn=e+cn,e)}(),sn=un,ln={},fn=!1,dn={},pn=[],vn={};a.config=function(n){if(p=n,p.version=p.version||{},cn?sn=q(un,j(p.base,!0)):(an=Y(n.base),sn=j(n.base)),_(p.version)?p._v=p.version:(p._v={},y(p.version,function(e,n){p._v[an+q(sn,e)]=n})),tn){var t=ln.url=L(an+q(sn,tn));ln._dfn=!1,dn[t]=ln}return e.DEBUG=n.debug=n.debug!==!1,a},a.use=function(e){return fn?a:(fn=!0,f=l(),e&&(ln.url=an+q(sn,e),dn[ln.url]=ln),ln.url?(z(ln.url),b.group(c),a):a)},a.callback=function(e){return ln._exd&&m(e)?(e.call(a,ln.exports),a):(m(e)&&v.push(e),a)};var hn,gn=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,mn=/\\\\/g,_n=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,yn={image:n,text:r,html:r,json:t,css:r},bn=function(e){var n=[];return e.replace(mn,"").replace(gn,function(e,t,r){if(r){var i=r.match(_n),u={name:L(i[1],!!i[2]),type:i[2]?yn[i[2].toLowerCase()]:o};n.push(u)}}),n},xn=function(e){var i=!0,u=pn.shift();if(u){var c=u[0],a=u[1],s=u[2],l=e.id,f=D(e),d=j(l);m(u[2])?i=!1:m(u[1])?(c=null,a=[],s=u[1]):m(u[0])&&(s=u[0],a=bn(s.toString()),c=null),c=ln._dfn&&ln._isAn?l:c||l;var p={_isAn:i,_path:d,_node:e,id:c,url:f,deps:a,factory:s};ln.id||(i||(dn[c]=dn[ln.url],delete dn[ln.url]),p._isMain=!0,ln=p,ln._dfn=!0);var v=[];y(a,function(e,i){if(_(i)&&(i={id:i}),ln._isAn){var u=q(d,i.name);i.id=L(an+u,i.type!==o)}if(c===i.id)throw"required myself: \n"+c;if(vn[i.id]&&y(vn[i.id].deps,function(e,n){if(n===c)throw"required circle: \n"+n+"\n"+c}),!dn[i.id]&&(v.push(i.id),dn[i.id]=!0,ln._isAn))switch(i.type){case r:case t:K(i.id,i.type);break;case n:Q(i.id);break;default:z(i.id)}}),p.deps=v,wn(p),pn.length&&F&&xn(F)}},wn=function(n){n.exports={},n._exe=function(){var t=function(e,t){var r;if(ln._isAn&&(r={name:e,type:t||o},e=an+L(q(n._path,r.name),r.type!==o)),!vn[e])throw"can not found module \n"+e+"\nbut required in\n"+n.id;return vn[e]._exe()};return function(){var r=n.id;return n._exd?vn[r].exports:(n._exd=!0,vn[r].exports=n.factory.call(e,t,n.exports,n)||n.exports,vn[r].exports)}}(),vn[n.id]=n,b.log(n.id),pn.length||(clearTimeout(hn),hn=setTimeout(function(){X||(b.log("past "+(l()-f)+"ms"),p.debug===!1&&B(N,M),b.groupEnd(c),ln._exe(),y(v,function(e,n){n.call(a,ln.exports)}))},1))},An=function(e,n,t){pn.push([e,n,t])};nn&&z(cn,!0),e.coolie=a,e.coolie.modules=vn,e.coolie.dependences=dn,e.coolie.each=y,e.coolie.getHost=Y,e.coolie.getPathJoin=q,e.coolie.getPathDir=j,e.coolie.getCurrentScript=V,e.coolie.getScriptURL=D,e.coolie.script=W,e.coolie.chunk=function(e){e=g(e)?e:[e],y(e,function(e,n){z(an+q(sn,n)+".js")})},e.define=An,e.define.amd={},e.define.cmd={}}}).call(this);